<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Hockey 2026">
    <title>Men's Hockey Tournament 2026</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 8px; }
        .container { max-width: 100%; background: white; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); padding: 15px; }
        .header { display: flex; align-items: center; gap: 20px; margin-bottom: 15px; }
        .header-logo { height: 80px; }
        .header-text h1 { color: #333; font-size: 1.6em; margin: 0; }
        .header-text small { color: #666; font-size: 0.8em; }
        .button-group { width: 100%; display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
        .btn { flex: 1; min-width: 100px; padding: 12px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; min-height: 44px; -webkit-tap-highlight-color: transparent; }
        .btn-primary { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .btn-secondary { background: #f0f0f0; color: #333; }
        .tabs { display: flex; gap: 8px; margin-bottom: 15px; border-bottom: 2px solid #ddd; }
        .tab { padding: 10px 12px; background: none; border: none; cursor: pointer; font-weight: 600; color: #666; border-bottom: 3px solid transparent; white-space: nowrap; min-height: 44px; -webkit-tap-highlight-color: transparent; }
        .tab.active { color: #667eea; border-bottom-color: #667eea; }
        .content { display: none; }
        .content.active { display: block; }
        .day-header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 10px 12px; border-radius: 5px; font-weight: bold; margin: 15px 0 10px 0; }
        .game-card { background: #f9f9f9; border: 1px solid #ddd; border-radius: 6px; padding: 10px; margin-bottom: 8px; }
        .game-card.completed { background: #f0f8f0; }
        .matchup { display: flex; gap: 8px; align-items: center; margin: 8px 0; flex-wrap: wrap; }
        .team { display: flex; align-items: center; gap: 5px; background: white; padding: 6px 8px; border-radius: 4px; font-size: 0.9em; flex: 1; min-width: 90px; }
        .flag { width: 24px; height: 18px; border-radius: 2px; }
        .score-group { display: flex; gap: 6px; align-items: center; margin-top: 8px; flex-wrap: wrap; }
        input[type="number"], select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; font-size: 0.9em; min-height: 40px; }
        input[type="number"] { width: 45px; text-align: center; }
        .save-btn { padding: 8px 12px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; min-height: 40px; -webkit-tap-highlight-color: transparent; }
        .final-score { font-weight: 700; padding: 6px 10px; background: white; border: 2px solid #4CAF50; border-radius: 4px; text-align: center; }
        .match-box { background: #f0f0f0; padding: 12px; margin: 12px 0; border-radius: 6px; }
        h3 { margin: 15px 0 10px 0; color: #333; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <svg class="header-logo" viewBox="0 0 800 600">
                <text x="400" y="240" font-size="90" font-weight="bold" fill="#a8d5ff" text-anchor="middle" font-family="Arial">MILANO CORTINA</text>
                <text x="400" y="320" font-size="70" font-weight="bold" fill="#a8d5ff" text-anchor="middle" font-family="Arial">2026</text>
                <circle cx="200" cy="420" r="40" fill="none" stroke="#0066cc" stroke-width="8"/>
                <circle cx="350" cy="420" r="40" fill="none" stroke="#000000" stroke-width="8"/>
                <circle cx="500" cy="420" r="40" fill="none" stroke="#ff0000" stroke-width="8"/>
                <circle cx="275" cy="480" r="40" fill="none" stroke="#ffcc00" stroke-width="8"/>
                <circle cx="425" cy="480" r="40" fill="none" stroke="#00cc00" stroke-width="8"/>
            </svg>
            <div class="header-text">
                <h1>Men's Hockey Tournament</h1>
                <small>Pacific Time | 3-2-1-0 Scoring</small>
            </div>
        </div>
        
        <div class="button-group">
            <a href="https://www.iihf.com/en/events/2026/olympic-m/schedule" target="_blank" style="flex: 1;"><button class="btn btn-primary">üìä IIHF Schedule</button></a>
            <a href="https://www.peacocktv.com/watch/2026-milan-cortina-olympics" target="_blank" style="flex: 1;"><button class="btn btn-primary">üì∫ Peacock TV</button></a>
            <button class="btn btn-secondary" onclick="resetAll()">üîÑ Reset</button>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('games')">Games</button>
            <button class="tab" onclick="showTab('standings')">Standings</button>
            <button class="tab" onclick="showTab('playoffs')">Playoffs</button>
        </div>
        
        <div id="games" class="content active" style="max-height: 800px; overflow-y: auto;">
            <div id="games-list"></div>
        </div>
        
        <div id="standings" class="content">
            <div style="background: #e3f2fd; border-left: 4px solid #2196F3; padding: 12px; margin-bottom: 15px; border-radius: 4px; color: #1565c0; font-size: 0.9em;">üìä Standings update as scores are entered.</div>
            <div id="standings-content"></div>
        </div>
        
        <div id="playoffs" class="content">
            <div style="background: #e3f2fd; border-left: 4px solid #2196F3; padding: 12px; margin-bottom: 15px; border-radius: 4px; color: #1565c0; font-size: 0.9em;">üèÜ Enter qualification playoff scores to advance the bracket.</div>
            <div id="playoffs-content"></div>
        </div>
    </div>
    
    <script>
        const teams = {'CAN': 1, 'FIN': 2, 'USA': 3, 'GER': 4, 'SWE': 5, 'SUI': 6, 'CZE': 7, 'ITA': 8, 'SVK': 9, 'LAT': 10, 'DEN': 11, 'FRA': 12};
        const flags = {'CAN': 'ca', 'FIN': 'fi', 'USA': 'us', 'GER': 'de', 'SWE': 'se', 'SUI': 'ch', 'CZE': 'cz', 'ITA': 'it', 'SVK': 'sk', 'LAT': 'lv', 'DEN': 'dk', 'FRA': 'fr'};
        const games = [
            {id:3, teams:'SUI|FRA', time:'THU 12 | 3:10 AM'}, {id:4, teams:'CZE|CAN', time:'THU 12 | 7:40 AM'}, {id:5, teams:'LAT|USA', time:'THU 12 | 12:10 PM'}, {id:6, teams:'GER|DEN', time:'THU 12 | 12:10 PM'},
            {id:1, teams:'SVK|FIN', time:'WED 11 | 7:40 AM'}, {id:2, teams:'SWE|ITA', time:'WED 11 | 12:10 PM'}, {id:7, teams:'FIN|SWE', time:'FRI 13 | 3:10 AM'}, {id:8, teams:'ITA|SVK', time:'FRI 13 | 3:10 AM'},
            {id:9, teams:'FRA|CZE', time:'FRI 13 | 7:40 AM'}, {id:10, teams:'CAN|SUI', time:'FRI 13 | 12:10 PM'}, {id:11, teams:'SWE|SVK', time:'SAT 14 | 3:10 AM'}, {id:12, teams:'GER|LAT', time:'SAT 14 | 3:10 AM'},
            {id:13, teams:'FIN|ITA', time:'SAT 14 | 7:40 AM'}, {id:14, teams:'USA|DEN', time:'SAT 14 | 12:10 PM'}, {id:15, teams:'SUI|CZE', time:'SUN 15 | 3:10 AM'}, {id:16, teams:'CAN|FRA', time:'SUN 15 | 7:40 AM'},
            {id:17, teams:'DEN|LAT', time:'SUN 15 | 10:10 AM'}, {id:18, teams:'USA|GER', time:'SUN 15 | 12:10 PM'}
        ];
        
        let standings = {};
        Object.keys(teams).forEach(code => {
            standings[code] = {team: code, points: 0, wins: 0, losses: 0, ot: 0, gf: 0, ga: 0};
        });
        
        function showTab(tab) {
            document.querySelectorAll('.content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
            
            if (tab === 'games') renderGames();
            if (tab === 'standings') updateStandings();
            if (tab === 'playoffs') generatePlayoffs();
        }
        
        function renderGames() {
            let html = '<div class="day-header">GROUP A</div>';
            [3,4,9,10,15,16].forEach(id => {
                const g = games.find(x => x.id === id);
                html += createGameCard(g);
            });
            html += '<div class="day-header">GROUP B</div>';
            [1,2,7,8,11,13].forEach(id => {
                const g = games.find(x => x.id === id);
                html += createGameCard(g);
            });
            html += '<div class="day-header">GROUP C</div>';
            [5,6,12,14,17,18].forEach(id => {
                const g = games.find(x => x.id === id);
                html += createGameCard(g);
            });
            document.getElementById('games-list').innerHTML = html;
        }
        
        function createGameCard(g) {
            const [t1, t2] = g.teams.split('|');
            const saved = localStorage.getItem(`g${g.id}`);
            const data = saved ? JSON.parse(saved) : null;
            
            let html = `<div class="game-card${data ? ' completed' : ''}">
                <div style="font-weight: 600; color: #667eea; font-size: 0.8em; margin-bottom: 5px;">${g.time}</div>
                <div class="matchup">
                    <div class="team"><img src="https://flagpedia.net/data/flags/icon/32x24/${flags[t1]}.png" class="flag"><span>${t1}</span></div>
                    <div style="color: #999; font-weight: 600; padding: 0 4px; font-size: 0.8em;">vs</div>
                    <div class="team"><img src="https://flagpedia.net/data/flags/icon/32x24/${flags[t2]}.png" class="flag"><span>${t2}</span></div>
                </div>`;
            
            if (data) {
                html += `<div class="final-score">${data.s1} - ${data.s2}</div>`;
            } else {
                html += `<div class="score-group">
                    <input type="number" id="g${g.id}_s1" placeholder="0" min="0">
                    <span style="color:#999">-</span>
                    <input type="number" id="g${g.id}_s2" placeholder="0" min="0">
                    <select id="g${g.id}_result"><option value="reg">REG</option><option value="ot">OT</option><option value="so">SO</option></select>
                    <button class="save-btn" onclick="saveGame(${g.id}, '${t1}', '${t2}')">Save</button>
                </div>`;
            }
            html += '</div>';
            return html;
        }
        
        function saveGame(id, t1, t2) {
            const s1 = parseInt(document.getElementById(`g${id}_s1`).value) || 0;
            const s2 = parseInt(document.getElementById(`g${id}_s2`).value) || 0;
            const result = document.getElementById(`g${id}_result`).value;
            
            if (s1 === s2 && result === 'reg') {
                alert('Game cannot end in tie.');
                return;
            }
            
            localStorage.setItem(`g${id}`, JSON.stringify({s1, s2, result}));
            
            standings[t1].gf += s1; standings[t1].ga += s2;
            standings[t2].gf += s2; standings[t2].ga += s1;
            
            if (s1 > s2) {
                standings[t1].points += (result === 'reg' ? 3 : 2);
                standings[t1].wins += 1;
                standings[t2].losses += 1;
                if (result !== 'reg') { standings[t2].points += 1; standings[t2].ot += 1; }
            } else {
                standings[t2].points += (result === 'reg' ? 3 : 2);
                standings[t2].wins += 1;
                standings[t1].losses += 1;
                if (result !== 'reg') { standings[t1].points += 1; standings[t1].ot += 1; }
            }
            
            renderGames();
            alert(`${t1} ${s1} - ${s2} ${t2} saved!`);
        }
        
        function updateStandings() {
            const groups = {A: ['CAN', 'CZE', 'FRA', 'SUI'], B: ['FIN', 'ITA', 'SVK', 'SWE'], C: ['DEN', 'GER', 'LAT', 'USA']};
            let html = '';
            
            Object.entries(groups).forEach(([g, list]) => {
                const sorted = list.sort((a, b) => {
                    if (standings[b].points !== standings[a].points) return standings[b].points - standings[a].points;
                    const gd_a = standings[a].gf - standings[a].ga;
                    const gd_b = standings[b].gf - standings[b].ga;
                    if (gd_b !== gd_a) return gd_b - gd_a;
                    return standings[b].gf - standings[a].gf;
                });
                
                html += `<div style="border: 2px solid #ddd; border-radius: 6px; padding: 12px; background: #f9f9f9; margin-bottom: 15px;">
                    <div style="font-size: 1.1em; font-weight: bold; color: #333; margin-bottom: 10px; border-bottom: 2px solid #667eea; padding-bottom: 8px;">Group ${g}</div>
                    <table style="width: 100%; font-size: 0.85em; border-collapse: collapse;">
                        <tr style="background: #667eea; color: white;"><th style="padding: 6px 4px; text-align: left;">#</th><th style="text-align: left;">Team</th><th>P</th><th>W</th><th>L</th><th>OT</th><th>Pts</th></tr>`;
                
                sorted.forEach((t, i) => {
                    const s = standings[t];
                    html += `<tr style="border-bottom: 1px solid #ddd;">
                        <td style="padding: 6px 4px;">${i+1}</td>
                        <td><img src="https://flagpedia.net/data/flags/icon/24x18/${flags[t]}.png" style="width: 24px; height: 18px; margin-right: 5px;">${t}</td>
                        <td style="text-align: center;">${s.wins + s.losses + s.ot}</td><td style="text-align: center;">${s.wins}</td><td style="text-align: center;">${s.losses}</td><td style="text-align: center;">${s.ot}</td><td style="text-align: center;"><strong>${s.points}</strong></td>
                    </tr>`;
                });
                html += '</table></div>';
            });
            
            document.getElementById('standings-content').innerHTML = html;
        }
        
        function generatePlayoffs() {
            const allTeams = Object.keys(standings).sort((a, b) => {
                if (standings[b].points !== standings[a].points) return standings[b].points - standings[a].points;
                const gd_a = standings[a].gf - standings[a].ga;
                const gd_b = standings[b].gf - standings[b].ga;
                if (gd_b !== gd_a) return gd_b - gd_a;
                if (standings[b].gf !== standings[a].gf) return standings[b].gf - standings[a].gf;
                return teams[a] - teams[b];
            });
            
            const playoff = localStorage.getItem('playoff') ? JSON.parse(localStorage.getItem('playoff')) : {};
            
            let html = '<h3>Preliminary Ranking</h3><p style="color: #667eea; font-weight: bold;">';
            allTeams.forEach((t, i) => html += `${i+1}. ${t} `);
            html += '</p>';
            
            // Qualification
            html += '<h3>Qualification Playoffs (TUE 17 FEB)</h3>';
            const qual = [{t1: allTeams[4], t2: allTeams[11], id: 'q1'}, {t1: allTeams[5], t2: allTeams[10], id: 'q2'}, {t1: allTeams[6], t2: allTeams[9], id: 'q3'}, {t1: allTeams[7], t2: allTeams[8], id: 'q4'}];
            qual.forEach(m => {
                html += `<div class="match-box"><strong>${m.t1} vs ${m.t2}</strong>`;
                if (playoff[m.id]) {
                    html += `<div style="color: #4CAF50; font-weight: bold;">‚úì Winner: ${playoff[m.id]}</div>`;
                } else {
                    const s1 = localStorage.getItem(`pq${m.id}_s1`) || '';
                    const s2 = localStorage.getItem(`pq${m.id}_s2`) || '';
                    html += `<div style="margin-top: 8px;"><input type="number" id="pq${m.id}_s1" value="${s1}" style="width: 45px; padding: 5px;"> - <input type="number" id="pq${m.id}_s2" value="${s2}" style="width: 45px; padding: 5px;"> <button class="save-btn" onclick="savePQ('${m.id}', '${m.t1}', '${m.t2}')">Save</button></div>`;
                }
                html += '</div>';
            });
            
            const qWinners = [playoff['q1'], playoff['q2'], playoff['q3'], playoff['q4']];
            if (qWinners.every(w => w)) {
                // QF
                html += '<h3>Quarterfinals (WED 18 FEB)</h3>';
                const qf = [{t1: allTeams[0], t2: qWinners[3], id: 'qf1'}, {t1: allTeams[1], t2: qWinners[2], id: 'qf2'}, {t1: allTeams[2], t2: qWinners[1], id: 'qf3'}, {t1: allTeams[3], t2: qWinners[0], id: 'qf4'}];
                qf.forEach(m => {
                    html += `<div class="match-box"><strong>${m.t1} vs ${m.t2}</strong>`;
                    if (playoff[m.id]) {
                        html += `<div style="color: #4CAF50; font-weight: bold;">‚úì Winner: ${playoff[m.id]}</div>`;
                    } else {
                        const s1 = localStorage.getItem(`pqf${m.id}_s1`) || '';
                        const s2 = localStorage.getItem(`pqf${m.id}_s2`) || '';
                        html += `<div style="margin-top: 8px;"><input type="number" id="pqf${m.id}_s1" value="${s1}" style="width: 45px; padding: 5px;"> - <input type="number" id="pqf${m.id}_s2" value="${s2}" style="width: 45px; padding: 5px;"> <button class="save-btn" onclick="savePQF('${m.id}', '${m.t1}', '${m.t2}')">Save</button></div>`;
                    }
                    html += '</div>';
                });
                
                const qfWinners = [playoff['qf1'], playoff['qf2'], playoff['qf3'], playoff['qf4']];
                if (qfWinners.every(w => w)) {
                    // SF
                    html += '<h3>Semifinals (FRI 20 FEB)</h3>';
                    const sf = [{t1: qfWinners[0], t2: qfWinners[3], id: 'sf1'}, {t1: qfWinners[1], t2: qfWinners[2], id: 'sf2'}];
                    sf.forEach(m => {
                        html += `<div class="match-box"><strong>${m.t1} vs ${m.t2}</strong>`;
                        if (playoff[m.id]) {
                            html += `<div style="color: #4CAF50; font-weight: bold;">‚úì Winner: ${playoff[m.id]}</div>`;
                        } else {
                            const s1 = localStorage.getItem(`psf${m.id}_s1`) || '';
                            const s2 = localStorage.getItem(`psf${m.id}_s2`) || '';
                            html += `<div style="margin-top: 8px;"><input type="number" id="psf${m.id}_s1" value="${s1}" style="width: 45px; padding: 5px;"> - <input type="number" id="psf${m.id}_s2" value="${s2}" style="width: 45px; padding: 5px;"> <button class="save-btn" onclick="savePSF('${m.id}', '${m.t1}', '${m.t2}')">Save</button></div>`;
                        }
                        html += '</div>';
                    });
                    
                    const sfWinners = [playoff['sf1'], playoff['sf2']];
                    const sfLosers = [sf[0].t1 === playoff['sf1'] ? sf[0].t2 : sf[0].t1, sf[1].t1 === playoff['sf2'] ? sf[1].t2 : sf[1].t1];
                    
                    if (sfWinners.every(w => w)) {
                        // Gold
                        html += '<h3>ü•á Gold Medal (SUN 22 FEB)</h3>';
                        html += `<div class="match-box" style="background: #FFD700; border: 2px solid #FFB700;"><strong>${sfWinners[0]} vs ${sfWinners[1]}</strong>`;
                        if (playoff['gold']) {
                            html += `<div style="color: #fff; font-weight: bold; font-size: 1.1em;">‚úì CHAMPION: ${playoff['gold']}</div>`;
                        } else {
                            const s1 = localStorage.getItem('pgold_s1') || '';
                            const s2 = localStorage.getItem('pgold_s2') || '';
                            html += `<div style="margin-top: 8px;"><input type="number" id="pgold_s1" value="${s1}" style="width: 45px; padding: 5px;"> - <input type="number" id="pgold_s2" value="${s2}" style="width: 45px; padding: 5px;"> <button class="save-btn" onclick="savePGold('${sfWinners[0]}', '${sfWinners[1]}')">Save</button></div>`;
                        }
                        html += '</div>';
                        
                        // Bronze
                        html += '<h3>ü•â Bronze Medal (SAT 21 FEB)</h3>';
                        html += `<div class="match-box" style="background: #CD7F32; border: 2px solid #8B4513; color: white;"><strong>${sfLosers[0]} vs ${sfLosers[1]}</strong>`;
                        if (playoff['bronze']) {
                            html += `<div style="color: #fff; font-weight: bold; font-size: 1.1em;">‚úì 3RD PLACE: ${playoff['bronze']}</div>`;
                        } else {
                            const s1 = localStorage.getItem('pbronze_s1') || '';
                            const s2 = localStorage.getItem('pbronze_s2') || '';
                            html += `<div style="margin-top: 8px;"><input type="number" id="pbronze_s1" value="${s1}" style="width: 45px; padding: 5px;"> - <input type="number" id="pbronze_s2" value="${s2}" style="width: 45px; padding: 5px;"> <button class="save-btn" onclick="savePBronze('${sfLosers[0]}', '${sfLosers[1]}')">Save</button></div>`;
                        }
                        html += '</div>';
                    }
                }
            }
            
            document.getElementById('playoffs-content').innerHTML = html;
        }
        
        function savePQ(id, t1, t2) { const s1 = parseInt(document.getElementById(`pq${id}_s1`).value) || 0; const s2 = parseInt(document.getElementById(`pq${id}_s2`).value) || 0; if (s1 === s2) { alert('Tie not allowed'); return; } const p = localStorage.getItem('playoff') ? JSON.parse(localStorage.getItem('playoff')) : {}; p[id] = s1 > s2 ? t1 : t2; localStorage.setItem('playoff', JSON.stringify(p)); localStorage.setItem(`pq${id}_s1`, s1); localStorage.setItem(`pq${id}_s2`, s2); generatePlayoffs(); }
        function savePQF(id, t1, t2) { const s1 = parseInt(document.getElementById(`pqf${id}_s1`).value) || 0; const s2 = parseInt(document.getElementById(`pqf${id}_s2`).value) || 0; if (s1 === s2) { alert('Tie not allowed'); return; } const p = localStorage.getItem('playoff') ? JSON.parse(localStorage.getItem('playoff')) : {}; p[id] = s1 > s2 ? t1 : t2; localStorage.setItem('playoff', JSON.stringify(p)); localStorage.setItem(`pqf${id}_s1`, s1); localStorage.setItem(`pqf${id}_s2`, s2); generatePlayoffs(); }
        function savePSF(id, t1, t2) { const s1 = parseInt(document.getElementById(`psf${id}_s1`).value) || 0; const s2 = parseInt(document.getElementById(`psf${id}_s2`).value) || 0; if (s1 === s2) { alert('Tie not allowed'); return; } const p = localStorage.getItem('playoff') ? JSON.parse(localStorage.getItem('playoff')) : {}; p[id] = s1 > s2 ? t1 : t2; localStorage.setItem('playoff', JSON.stringify(p)); localStorage.setItem(`psf${id}_s1`, s1); localStorage.setItem(`psf${id}_s2`, s2); generatePlayoffs(); }
        function savePGold(t1, t2) { const s1 = parseInt(document.getElementById('pgold_s1').value) || 0; const s2 = parseInt(document.getElementById('pgold_s2').value) || 0; if (s1 === s2) { alert('Tie not allowed'); return; } const p = localStorage.getItem('playoff') ? JSON.parse(localStorage.getItem('playoff')) : {}; p['gold'] = s1 > s2 ? t1 : t2; localStorage.setItem('playoff', JSON.stringify(p)); localStorage.setItem('pgold_s1', s1); localStorage.setItem('pgold_s2', s2); generatePlayoffs(); }
        function savePBronze(t1, t2) { const s1 = parseInt(document.getElementById('pbronze_s1').value) || 0; const s2 = parseInt(document.getElementById('pbronze_s2').value) || 0; if (s1 === s2) { alert('Tie not allowed'); return; } const p = localStorage.getItem('playoff') ? JSON.parse(localStorage.getItem('playoff')) : {}; p['bronze'] = s1 > s2 ? t1 : t2; localStorage.setItem('playoff', JSON.stringify(p)); localStorage.setItem('pbronze_s1', s1); localStorage.setItem('pbronze_s2', s2); generatePlayoffs(); }
        
        function resetAll() { if (confirm('Reset all?')) { localStorage.clear(); location.reload(); } }
        
        window.addEventListener('load', () => {
            games.forEach(g => {
                const saved = localStorage.getItem(`g${g.id}`);
                if (saved) {
                    const d = JSON.parse(saved);
                    const [t1, t2] = g.teams.split('|');
                    standings[t1].gf += d.s1; standings[t1].ga += d.s2;
                    standings[t2].gf += d.s2; standings[t2].ga += d.s1;
                    if (d.s1 > d.s2) { standings[t1].points += d.result === 'reg' ? 3 : 2; standings[t1].wins += 1; standings[t2].losses += 1; if (d.result !== 'reg') { standings[t2].points += 1; standings[t2].ot += 1; } }
                    else { standings[t2].points += d.result === 'reg' ? 3 : 2; standings[t2].wins += 1; standings[t1].losses += 1; if (d.result !== 'reg') { standings[t1].points += 1; standings[t1].ot += 1; } }
                }
            });
            renderGames();
        });
    </script>
</body>
</html>
